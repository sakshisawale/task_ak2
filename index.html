<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Animeverse - Decode and Escape</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Canva+Sans&display=swap');
        body {
            background-color: #161a2b;
            color: white;
            font-family: 'Canva Sans', sans-serif;
            text-align: center;
        }
        .glitch-message {
            background-color: #000;
            color: white;
            text-align: left;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 20px;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-4xl bg-[#1e2235] rounded-2xl shadow-lg p-8 flex flex-col gap-8">
        <h1 class="text-6xl text-red-400">The Animeverse</h1>
        <h2 class="text-4xl text-purple-400">Decode & Escape</h2>
        
        <!-- Challenge 1 -->
        <div id="challenge1" class="challenge-container bg-[#2a2f47] p-6 rounded-lg border border-purple-500 shadow-md">
            <h2 class="text-2xl text-blue-400">Step 1: Extract Hidden Information</h2>
            <p class="text-yellow-400 font-mono text-lg">H3ll0, w0r1d! Th1s 1s a te5t m3ssag3 with s0me hidden charact3rs.</p>
           
            <input type="text" id="regexInput" class="p-2 mt-4 w-full rounded text-black" placeholder="Enter the hidden sequence">
            <button class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 rounded-lg mt-2" onclick="checkRegex()">Submit</button>
            <p id="regexMessage" class="hidden text-green-400 mt-2">‚úÖ Correct! Moving to next level.</p>
            <p id="regexError" class="hidden text-yellow-400 mt-2">‚ùå Try again! </p>
        </div>

        <!-- Challenge 2 -->
        <div id="challenge2" class="challenge-container hidden bg-[#2a2f47] p-6 rounded-lg border border-purple-500 shadow-md">
            <h2 class="text-2xl text-blue-400">Step 2: The Glitch in the System</h2>
            <p class="text-gray-300">Remove non-alphanumeric characters to uncover the hidden password.</p>
            <p class="text-red-500">ERROR: Corrupted Message - "S#@3e!5@c*r&e1t#"</p>

            <input type="text" id="hiddenPasswordInput" class="p-2 mt-4 w-full rounded text-black" placeholder="Enter the hidden password">
            <button class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 rounded-lg mt-2" onclick="checkHiddenPassword()">Submit</button>
            <p id="hiddenPasswordMessage" class="hidden text-green-400 mt-2">‚úÖ Correct! Moving to next level.</p>
            <p id="hiddenPasswordError" class="hidden text-yellow-400 mt-2">‚ùå Try again!</p>
        </div>

        <!-- Challenge 3 -->
        <div id="challenge3" class="challenge-container hidden bg-[#2a2f47] p-6 rounded-lg border border-purple-500 shadow-md">
            <h2 class="text-2xl text-blue-400">Step 3: Retrieve the Secret Key</h2>
            <p class="text-gray-300">Click the reveal button to find the key.</p>
            <a href="secret.html" class="text-purple-400 underline">Go to secret file...</a>

            <input type="text" id="keyInput" class="p-2 mt-4 w-full rounded text-black" placeholder="Enter the key">
            <button class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 rounded-lg mt-2" onclick="checkKey()">Submit</button>
            <p id="keyMessage" class="hidden text-green-400 mt-2">‚úÖ Correct! You unlocked the vault!</p>
            <p id="keyError" class="hidden text-yellow-400 mt-2">‚ùå Wrong key! Try again.</p>
        </div>

        <!-- Completion Message -->
        <div id="completionMessage" class="hidden p-6 rounded-lg text-white text-lg">
            üéâ Congratulations! You unlocked the encrypted vault! <br><strong>FINAL KEY: THEVAULT</strong> üéâ 
       </div>
    </div>

   <script>
        document.addEventListener("DOMContentLoaded", function () {
            let savedChallenge = localStorage.getItem("currentChallenge");
            if (savedChallenge) {
                showChallenge(parseInt(savedChallenge));
            }
        });

        function showChallenge(challengeNumber) {
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`challenge${i}`).classList.add('hidden');
            }
            document.getElementById(`challenge${challengeNumber}`).classList.remove('hidden');
            localStorage.setItem("currentChallenge", challengeNumber);
        }

        function nextChallenge(current) {
            let next = current + 1;
            showChallenge(next);
        }

        function checkRegex() {
            let input = document.getElementById('regexInput').value;
            let correctAnswer = "3015303";  

            if (input === correctAnswer) {
                document.getElementById('regexMessage').classList.remove('hidden');
                setTimeout(() => nextChallenge(1), 1000);
            } else {
                document.getElementById('regexError').classList.remove('hidden');
                setTimeout(() => document.getElementById('regexError').classList.add('hidden'), 2000);
            }
        }

        function checkHiddenPassword() {
            let input = document.getElementById('hiddenPasswordInput').value;
            let correctPassword = "Secret";

            if (input === correctPassword) {
                document.getElementById('hiddenPasswordMessage').classList.remove('hidden');
                setTimeout(() => nextChallenge(2), 1000);
            } else {
                document.getElementById('hiddenPasswordError').classList.remove('hidden');
                setTimeout(() => document.getElementById('hiddenPasswordError').classList.add('hidden'), 2000);
            }
        }

        function checkKey() {
            let answer = document.getElementById('keyInput').value;
            let secretKey = "HIDDENKEY";

            if (answer === secretKey) {
                document.getElementById('keyMessage').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('challenge3').classList.add('hidden');
                    document.getElementById('completionMessage').classList.remove('hidden');
                    localStorage.removeItem("currentChallenge");
                }, 1000);
            } else {
                document.getElementById('keyError').classList.remove('hidden');
                setTimeout(() => document.getElementById('keyError').classList.add('hidden'), 2000);
            }
        }
    </script>
</body>
</html>
